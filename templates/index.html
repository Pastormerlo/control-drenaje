<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Control de Drenaje</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container py-3">
    <h3 class="text-center mb-3">ğŸ©º Control de Drenaje</h3>

    <form method="POST" class="card p-3 mb-4 shadow-sm">
        <div class="row g-2">
            <div class="col-6">
                <label class="form-label">Fecha</label>
                <input type="date" name="fecha" id="f_auto" class="form-control" required>
            </div>
            <div class="col-6">
                <label class="form-label">Hora</label>
                <input type="time" name="hora" id="h_auto" class="form-control" required>
            </div>
        </div>

        <label class="form-label mt-2">ğŸ’§ Drenaje izquierdo (ml)</label>
        <input type="number" name="cantidad_izq" step="0.01" class="form-control" placeholder="0.75" required>

        <label class="form-label mt-2">ğŸ’§ Drenaje derecho (ml)</label>
        <input type="number" name="cantidad_der" step="0.01" class="form-control" placeholder="0.75" required>

        <label class="form-label mt-2">Observaciones</label>
        <textarea name="observaciones" class="form-control" rows="2"></textarea>

        <button class="btn btn-primary mt-3 w-100">Guardar registro</button>
    </form>

    <h5>ğŸ“‹ Historial</h5>

    {% for r in registros %}
    <div class="card mb-2 shadow-sm">
        <div class="card-body p-2">
            <strong>ğŸ“… {{ r.fecha }} â€” â° {{ r.hora }}</strong><br>
            <span class="text-primary">ğŸ’§ Izq: <strong>{{ r.cant_izq }}</strong> ml</span> â€” 
            <span class="text-primary">Der: <strong>{{ r.cant_der }}</strong> ml</span><br>
            <small class="text-muted">{{ r.observaciones }}</small>
        </div>
    </div>
    {% endfor %}
</div>

<script>
    // Esto te ahorra tiempo poniendo la fecha y hora actual
    window.onload = function() {
        const ahora = new Date();
        document.getElementById('f_auto').value = ahora.toISOString().split('T')[0];
        document.getElementById('h_auto').value = ahora.toLocaleTimeString('it-IT', { hour: '2-digit', minute: '2-digit' });
    }
</script>

</body>
</html>
